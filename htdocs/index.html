<!DOCTYPE html>
<html>
    <head>

        <title>Line Charts and Options</title>

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
        <link class="include" rel="stylesheet" type="text/css" href="./jqplot/jquery.jqplot.min.css" />
        <script class="include" type="text/javascript" src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script class="include" type="text/javascript" src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.3/moment.min.js"></script>
        <script type="text/javascript" src="./jqplot/jquery.jqplot.min.js"></script>
        <script type="text/javascript" src="./jqplot/plugins/jqplot.canvasTextRenderer.min.js"></script>
        <script type="text/javascript" src="./jqplot/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>
        <script>
            $(document).on('pageshow', '#graph-page', function(){ 
                $(document).on( "popupafteropen", "#ExchangeRate_graph",function( event, ui ) {
                    var plot1 = $.jqplot('mychartshow', [[2.89, 3.1, 3.5, 3.4, 2.92]], {
                        title : 'US Dollar',

                        axes : {
                            xaxis : {
                                ticks : [[1, 14], [2, 21], [3, 28], [4, 4], [5, 11]] //using 2d value array
                            },
                            yaxis : {
                                ticks : [2.8, 3.0, 3.2, 3.4, 3.6]

                            }

                        }
                    });
                });
            });
        </script>
    </head>
    <body>
        <div data-role="page" id="graph-page">

            <div data-role="content">
                <a href="#ExchangeRate_graph" data-rel="popup" data-role="button" data-inline="true" data-transition="pop">Basic Popup</a>
                <div data-role="popup" id="ExchangeRate_graph" data-theme="c" align="left">

                    <!--Graph Section-->
                    <div id="mychartshow">

                    </div>

                </div>
            </div>

            <script type="text/javascript">
                $(document).ready(function() {
                    var now = moment(),
                        birthDay = moment("1971-06-25"),
                        diff = now.diff(birthDay, 'days')
                        initDisplayingPeriod = function (diffInDays) {
                            var period = [],
                                //currentDay = moment(),
                                currentDay = moment("1971-06-25"),
                                //currentDiffInDays = diffInDays;
                                currentDiffInDays = 0;
                                
                            for (var i = 1; i < 16; i++) {
                                var day = {
                                    day : currentDay.clone(),
                                    physical : Math.sin(2 * Math.PI * currentDiffInDays / 23),
                                    emotional : Math.sin(2 * Math.PI * currentDiffInDays / 28),
                                    intellectual : Math.sin(2 * Math.PI * currentDiffInDays / 33)                            
                                };
                                period.push(day);
                                currentDiffInDays++;
                                currentDay.add(1, 'day');
                            }
                            
                            return period;
                        };
                        
                    console.debug(initDisplayingPeriod(0));
                });
                
                function openpopup() {
                    $('#ExchangeRate_graph').popup('open');
                }
            </script>

        </div><!--page-->

    </body>

</html>

